# Visualiztion _pythonìœ¼ë¡œ 

[1103 í•™ìŠµ]
ì‹œê°í™” ì—°ìŠµ ë° ì‘ì„± ì½”ë“œ ê¹ƒí—™ ë¸”ë¡œê·¸ ë° ê¹ƒí—™ì— ì˜¬ë¦¬ê¸°, ê°œì¸ë³„ë¡œ ê³µìœ 

+ ì‹œê°í™” ì˜¬ë¦´ ë•Œ, ì „ì²´ ì½”ë“œ ì˜¬ë¦¬ì§€ ë§ˆì‹œê³ , 
ë‚˜ëˆ ì„œ ì˜¬ë¦¬ì„¸ìš”. ì„¤ëª… ê¸€ ì¶”ê°€í•˜ì‹œê³ ì—¬~ (ì˜ˆì‹œ í•˜ë‹¨)

  ì‚°ì ë„: ì‚°ì ë„ë€ ë¬´ì—‡ì¸ê°€? ì–¸ì œ ì“°ëŠ”ê°€? ì½”ë“œ ì‘ì„± ë° ê°„ë‹¨ ì„¤ëª…
  ë°•ìŠ¤í”Œë¡¯: ë°•ìŠ¤í”Œë¡¯ì´ë€ ë¬´ì—‡ì¸ê°€? ì–¸ì œ ì“°ëŠ”ê°€? ì½”ë“œ ì‘ì„± ë° ê°„ë‹¨ ì„¤ëª…


ì˜¤í›„ 1ì‹œê¹Œì§€ 1ì°¨ë¡œ í•œë²ˆ ì˜¬ë ¤ì„œ ê°œì¸ë³„ë¡œ ê³µìœ í•´ì£¼ì„¸ìš”. í™§íŒ…ìš”

## Intro 
pythonì—ì„œ visualiztion í•˜ê¸° ìœ„í•´ì„œëŠ” ë§ì€ ë°©ë²•ì´ ìˆë‹¤. 

data Analistë“¤ì€ ì‹œê°í™”ë¥¼ ìœ„í•´ ë§ì€ toolì„ ì‚¬ìš© í•˜ëŠ”ë° ìš°ë¦¬ëŠ” **Seaborn**ê³¼ **Matplotlib**ì„ ì´ìš©í•˜ì—¬ ì‹œê°í™”ë¥¼ í•  ì˜ˆì •ì´ë‹¤.


<br>

---

<br>


ì½”ë“œ ê¸°ë°˜(python)ì˜ data visualiztionì˜ ì¥ì 
  - ì—¬ëŸ¬ ê·¸ë˜í”„ ë™ì‹œ ì‘ì„± ê°€ëŠ¥
  - ê¸°ì¡´ì˜ ì½”ë“œ ì¬í™œìš©ì„±
  - ë°ì´í„° ê·¸ê¸°ì˜ ì œí•œì´ ì—†ìŒ (RAMë“±ì˜ ì œì•½ì¡°ê±´ ì—†ì„ë•Œ)

<br>

**Matplotlib** ëŠ” ì´ë¯¸ì§€ ë°ì´í„°ì™€ ì •í˜• ë°ì´í„°(ì •ì  ê·¸ë˜í”„)ë¥¼ ì‹œê°í™” í•  ìˆ˜ ìˆëŠ”ë° ë‚˜ì™€ ê°™ì€ ë¹„ì „ê³µìë“¤ì—ê²Œ ì‹œê°í™” ë¬¸ë²•ì´ ì¡°ê¸ˆ ì–´ë µë‹¤ê³  í•œë‹¤. í•˜ì§€ë§Œ pandas data frameì—ì„œ ì‰½ê²Œ ì‹œê°í™” êµ¬í˜„ í•˜ë©°, í†µê³„(íšŒê·€ì„ ) ê·¸ë˜í”„ ë“±ì„ ì‰½ê²Œ êµ¬í˜„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ë°°ì›Œì•¼ í•œë‹¤. 

**seaborn**ì˜ ê²½ìš° ê·¸ë˜í”„ê°€ ì˜ˆì˜ê²Œ ë‚˜ì˜¤ì§€ ì•Šì§€ë§Œ ë¹„êµì  ê°„ë‹¨í•œ ì½”ë“œë¡œ ì‹œê°í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì„¸ë¶€ ì˜µì…˜ì„ ìˆ˜ì • í•˜ê³  ì‹¶ë‹¤ë©´ Matplotlibë¥¼ ì•Œì•„ì•¼ í•œë‹¤. ì´ëŠ” ë‚´ë¶€ ì›ë¦¬ë¥¼ íŒŒì•… í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë‚´ê°€ ê°ë‹¹í•˜ê¸° í˜ë“¤ë‹¤. 

 ë•Œë¬¸ì— ì§€ê¸ˆ ë‹¨ê³„ì—ì„œëŠ” Matplotlibê³¼ seabornì˜ ì¥ì ì„ ì ì ˆí•˜ê²Œ ì„ì–´ì„œ ì‹œê°í™”ë¥¼ ì§„í–‰ í•´ ë³´ì.

<br>

ì•„ë˜ì™€ ê°™ì€ Tutorialì„ ì§„í–‰ í•˜ë©´ ì„¸ë¶€ ì˜µì…˜ì„ ì¡°ì • í•˜ê¸° ì‰½ë‹¤ê³  í•œë‹¤. 
https://matplotlib.org/stable/tutorials/index.html

## matplotlib

matplotlibë¥¼ ì´ìš©í•˜ì—¬ visualiztionì„ í•´ ë³´ì.

ì œì¼ ë¨¼ì € í•´ ì£¼ì–´ì•¼ í•  ì¼ì€ Importí•˜ì—¬ matplotlibë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì´ë¥¼ pltë“±ì˜ ê°ì²´ì— ì €ì¥ í•´ ì£¼ëŠ” ê²ƒì´ë‹¤. 




```python
import matplotlib.pyplot as plt

dates = [
    '2021-01-01', '2021-01-02', '2021-01-03', '2021-01-04', '2021-01-05',
    '2021-01-06', '2021-01-07', '2021-01-08', '2021-01-09', '2021-01-10'
]
min_temperature = [20.7, 17.9, 18.8, 14.6, 15.8, 15.8, 15.8, 17.4, 21.8, 20.0]
max_temperature = [34.7, 28.9, 31.8, 25.6, 28.8, 21.8, 22.8, 28.4, 30.8, 32.0]

```

ìœ„ì˜ dataëŠ” ê°•ì‚¬ë‹˜ì˜ dataë¥¼ ê°€ì ¸ ì˜¨ ê²ƒì´ë‹¤. 

dataë¥¼ ì‹œê°í™” ìë£Œë¡œ ë§Œë“¤ì–´ ë³´ì,


```python
fig, axes = plt.subplots(nrows=1, ncols=1, figsize=(10,6))
axes.plot(dates, min_temperature, label = 'Min Temperature')
axes.plot(dates, max_temperature, label = 'Max Temperature')
axes.legend()
plt.show()
```


    
![png](output_6_0.png)
    


ìœ„ì˜ í‘œëŠ” legendê°€ ìˆê³ , ë‚ ì§œë³„ë¡œ Min Tempì™€ Max Tempê°€ ìˆëŠ” ê·¸ë˜í”„ ì´ë‹¤. 


ë¨¼ì € fig, ax = plt.subplots()ë¥¼ ì´ìš©í•˜ì—¬ í‘œë¥¼ ìƒì„± í•œë‹¤. 

ì´ë•Œ figureì—ëŒ€í•œ ì •ë³´ë¥¼ í•¨ê»˜ ìƒì„± í•  ìˆ˜ ìˆëŠ”ë°, (nrows=1, ncols=1, figsize=(10,6)) ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ (í–‰ì˜ ê°¯ìˆ˜ =1, ì—´ì˜ ê°¯ìˆ˜=1, fig sizeëŠ” 10X6)ì´ë‹¤. 

axë¥¼ í†µí•˜ì—¬ plot í˜•íƒœì˜ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ëŠ”ë°, (xì¶•, yì¶• , label = "[name]")ì˜ í˜•íƒœë¡œ  plotì„ ì¶”ê°€ í•´ ì¤€ë‹¤. 
ì´ë•Œ Legend ë¥¼ ìƒì„± í•˜ê³  ì‹¶ë‹¤ë©´, ax.legend()í•¨ìˆ˜ë¡œ ì¶”ê°€ í•´ ì¤„ ìˆ˜ ìˆë‹¤. 

ë§ˆì§€ë§‰ìœ¼ë¡œ plt.show() ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆë¬´ë¦¬ í•´ ì¤€ë‹¤. 


ë¬¼ë¡  ë§ˆì§€ë§‰ ì½”ë“œë¥¼ ë„£ì§€ ì•Šì•„ë„ ë³´ì—¬ ì£¼ì§€ë§Œ, ë„£ì–´ì£¼ëŠ” ê²ƒì´ ì¸ì§€ìƒì •ì´ë¼ê³  í•œë‹¤. 


```python
print(fig)
print(axes)

```

    Figure(720x432)
    AxesSubplot(0.125,0.125;0.775x0.755)
    

ìœ„ì˜ í‘œì¸ figì˜ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆê²Œ print í•¨ìˆ˜ë¡œ ë½‘ì•„ ë´¤ëŠ”ë° ì´ê±´ ë¬´ìŠ¨ ë§ ì¸ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. 


### matplotlibë¡œ ì„  ê·¸ë˜í”„ ê·¸ë¦¬ê¸° 

ì•„ì§ dataë¥¼ ì–´ë””ì—ì„œ ë°›ì„ ìˆ˜ ìˆëŠ”ì§€ ì˜ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ê°•ì‚¬ë‹˜ì´ ë‹¤ìš´ë°›ì€ í‘œë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ ë³´ì 

ì°¸ì¡°: https://pypi.org/project/fix-yahoo-finance/


```python
!pip install yfinance --upgrade --no-cache-dir
```

    Collecting yfinance
      Downloading yfinance-0.1.64.tar.gz (26 kB)
    Requirement already satisfied: pandas>=0.24 in /usr/local/lib/python3.7/dist-packages (from yfinance) (1.1.5)
    Requirement already satisfied: numpy>=1.15 in /usr/local/lib/python3.7/dist-packages (from yfinance) (1.19.5)
    Requirement already satisfied: requests>=2.20 in /usr/local/lib/python3.7/dist-packages (from yfinance) (2.23.0)
    Requirement already satisfied: multitasking>=0.0.7 in /usr/local/lib/python3.7/dist-packages (from yfinance) (0.0.9)
    Collecting lxml>=4.5.1
      Downloading lxml-4.6.4-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (6.3 MB)
    [K     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 6.3 MB 7.7 MB/s 
    [?25hRequirement already satisfied: python-dateutil>=2.7.3 in /usr/local/lib/python3.7/dist-packages (from pandas>=0.24->yfinance) (2.8.2)
    Requirement already satisfied: pytz>=2017.2 in /usr/local/lib/python3.7/dist-packages (from pandas>=0.24->yfinance) (2018.9)
    Requirement already satisfied: six>=1.5 in /usr/local/lib/python3.7/dist-packages (from python-dateutil>=2.7.3->pandas>=0.24->yfinance) (1.15.0)
    Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.7/dist-packages (from requests>=2.20->yfinance) (1.24.3)
    Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.7/dist-packages (from requests>=2.20->yfinance) (3.0.4)
    Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.7/dist-packages (from requests>=2.20->yfinance) (2.10)
    Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.7/dist-packages (from requests>=2.20->yfinance) (2021.5.30)
    Building wheels for collected packages: yfinance
      Building wheel for yfinance (setup.py) ... [?25l[?25hdone
      Created wheel for yfinance: filename=yfinance-0.1.64-py2.py3-none-any.whl size=24109 sha256=25a6e16cba240e66cb4999d0947a231b790b2b96766767434407e09149ec9302
      Stored in directory: /tmp/pip-ephem-wheel-cache-a8wml444/wheels/86/fe/9b/a4d3d78796b699e37065e5b6c27b75cff448ddb8b24943c288
    Successfully built yfinance
    Installing collected packages: lxml, yfinance
      Attempting uninstall: lxml
        Found existing installation: lxml 4.2.6
        Uninstalling lxml-4.2.6:
          Successfully uninstalled lxml-4.2.6
    Successfully installed lxml-4.6.4 yfinance-0.1.64
    


```python
import yfinance as yf

data= yf.download('AAPL', '2019-08-01', '2021-08-01')
data.info()
print(yf)

```

    [*********************100%***********************]  1 of 1 completed
    <class 'pandas.core.frame.DataFrame'>
    DatetimeIndex: 504 entries, 2019-08-01 to 2021-07-30
    Data columns (total 6 columns):
     #   Column     Non-Null Count  Dtype  
    ---  ------     --------------  -----  
     0   Open       504 non-null    float64
     1   High       504 non-null    float64
     2   Low        504 non-null    float64
     3   Close      504 non-null    float64
     4   Adj Close  504 non-null    float64
     5   Volume     504 non-null    int64  
    dtypes: float64(5), int64(1)
    memory usage: 27.6 KB
    <module 'yfinance' from '/usr/local/lib/python3.7/dist-packages/yfinance/__init__.py'>
    

info() í•¨ìˆ˜ë¥¼ í†µí•´ columnì •ë³´ì™€ dataì˜ ê°¯ìˆ˜, dataì˜ typeê¹Œì§€ ì•Œ ìˆ˜ ìˆë‹¤. 
date time indexì— êµ¬ê°„ì´ ë‚´ê°€ ì •í•œë°ë¡œ ë‚˜ì™€ ìˆëŠ” ê²ƒë„ ë³¼ ìˆ˜ ìˆë‹¤. 


```python
ts = data['Open']
print(ts.head())
```

    Date
    2019-08-01    53.474998
    2019-08-02    51.382500
    2019-08-05    49.497501
    2019-08-06    49.077499
    2019-08-07    48.852501
    Name: Open, dtype: float64
    

ts ê°ì²´ì— Open dataë¥¼ ë‹´ê³  .head() í•¨ìˆ˜ë¡œ ìƒìœ„ 5ê°œì˜ í•­ëª©ì„ ê°€ì ¸ì™€ ë³¸ë‹¤. 



í˜¹ì‹œ, 
[Pandas](https://colab.research.google.com/drive/1GQSjJvnRxxMhOGiopbX2_m9swbMOp7PP) ì—ëŒ€í•˜ì—¬ ë” ì •ë¦¬ëœ ê²ƒì„ ì•Œê³  ì‹¶ë‹¤ë©´, ë§í¬ë¥¼ í†µí•´ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. 

#### Pyplot API 
ì•„ë˜ì˜ ì˜ˆëŠ” Pyplot API ë°©ë²•ì„ ì´ìš©í•˜ì—¬, í•œê°œì”© dataë¥¼ ë„£ì–´ ì¤€ í˜•íƒœ ì´ë‹¤. ì´ëŠ” ê°ì²´ì§€í–¥ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤ê³  í•˜ê¸° ì–´ë µì§€ë§Œ, ê°€ëŠ¥ì€ í•˜ë‹¤. 


```python
# import fix_yahoo_finance as yf
import yfinance as yf
import matplotlib.pyplot as plt

data = yf.download('AAPL', '2019-08-01', '2020-08-01')
ts = data['Open']
plt.figure(figsize=(10,6))
plt.plot(ts)
plt.legend(labels=['Price'], loc='best')
plt.title('Stock Market fluctuation of AAPL') 
plt.xlabel('Date') 
plt.ylabel('Stock Market Open Price') 
plt.show()
```

    [*********************100%***********************]  1 of 1 completed
    


    
![png](output_18_1.png)
    


#### Pyplot API ê°ì²´ì§€í–¥  


```python
from matplotlib.backends.backend_agg
import FigureCanvasAgg as FigureCanvas
from matplotlib.figure import Figure
import matplotlib.pyplot as plt

```

ê°ì²´ì§€í–¥ì„ ìœ„í•´ importë¥¼ í•´ ì¤€ë‹¤. 


```python
fig = Figure()

import numpy as np
np.random.seed(6)
x = np.random.randn(20000)

ax = fig.add_subplot(111)
ax.hist(x, 100)
ax.set_title('Artist Layer Histogram')
# fig.savefig('Matplotlib_histogram.png')
plt.show()
```
